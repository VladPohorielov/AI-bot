# ü§ñ Briefly - AI Telegram Bot

**Briefly** ‚Äî –ø–µ—Ä—Å–æ–Ω–∞–ª—å–Ω–∏–π AI-–ø–æ–º—ñ—á–Ω–∏–∫ –¥–ª—è Telegram, —è–∫–∏–π –¥–æ–ø–æ–º–∞–≥–∞—î –æ–±—Ä–æ–±–ª—è—Ç–∏ –≥–æ–ª–æ—Å–æ–≤—ñ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω–Ω—è, —Å—Ç–≤–æ—Ä—é–≤–∞—Ç–∏ —Ä–µ–∑—é–º–µ –ø–µ—Ä–µ–ø–∏—Å–æ–∫ —Ç–∞ –∫–µ—Ä—É–≤–∞—Ç–∏ –ø–æ–¥—ñ—è–º–∏ –≤ –∫–∞–ª–µ–Ω–¥–∞—Ä—ñ.

## üöÄ –û—Å–Ω–æ–≤–Ω—ñ –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ

- üó£Ô∏è **–¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü—ñ—è –≥–æ–ª–æ—Å–æ–≤–∏—Ö –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å** - –ø–µ—Ä–µ—Ç–≤–æ—Ä–µ–Ω–Ω—è –∞—É–¥—ñ–æ —É —Ç–µ–∫—Å—Ç –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Whisper
- üìù **–°—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–∑—é–º–µ** - —ñ–Ω—Ç–µ–ª–µ–∫—Ç—É–∞–ª—å–Ω–µ –∑–≥–æ—Ä—Ç–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É —Ç–∞ –ø–µ—Ä–µ–ø–∏—Å–æ–∫
- üìÖ **–£–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è –ø–æ–¥—ñ—è–º–∏** - –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π –∑ –ø–µ—Ä–µ–ø–∏—Å–æ–∫ —Ç–∞ –¥–æ–¥–∞–≤–∞–Ω–Ω—è —É Google Calendar
- üåê **–ú—É–ª—å—Ç–∏–º–æ–≤–Ω—ñ—Å—Ç—å** - –ø—ñ–¥—Ç—Ä–∏–º–∫–∞ —É–∫—Ä–∞—ó–Ω—Å—å–∫–æ—ó, —Ä–æ—Å—ñ–π—Å—å–∫–æ—ó, –∞–Ω–≥–ª—ñ–π—Å—å–∫–æ—ó —Ç–∞ —ñ–Ω—à–∏—Ö –º–æ–≤
- ‚öôÔ∏è **–ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** - –ø–µ—Ä—Å–æ–Ω–∞–ª—ñ–∑–∞—Ü—ñ—è —Å—Ç–∏–ª—ñ–≤ —Ä–µ–∑—é–º–µ —Ç–∞ –º–æ–≤–Ω–∏—Ö –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω—å
- üì± **–ó—Ä—É—á–Ω–∏–π —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å** - —ñ–Ω—Ç—É—ó—Ç–∏–≤–Ω–µ –∫–µ—Ä—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Telegram

## üõ†Ô∏è –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **Python 3.11+**
- **aiogram 3.10** - Telegram Bot API
- **OpenAI Whisper** - —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü—ñ—è –∞—É–¥—ñ–æ
- **OpenAI GPT** - —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è —Ä–µ–∑—é–º–µ —Ç–∞ –∞–Ω–∞–ª—ñ–∑ —Ç–µ–∫—Å—Ç—É
- **Google Calendar API** - —ñ–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –∑ –∫–∞–ª–µ–Ω–¥–∞—Ä–µ–º
- **SQLAlchemy + SQLite** - –±–∞–∑–∞ –¥–∞–Ω–∏—Ö
- **aiohttp** - OAuth —Å–µ—Ä–≤–µ—Ä

## üìã –ö–æ–º–∞–Ω–¥–∏ –±–æ—Ç–∞

- `/start` - –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Briefly
- `/help` - –î–æ–≤—ñ–¥–∫–∞ –ø–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—é
- `/settings` - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –±–æ—Ç–∞
- `/capture_chat` - –ü–æ—á–∞—Ç–∏ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–ø–∏—Å–∫–∏
- `/end_capture` - –ó–∞–≤–µ—Ä—à–∏—Ç–∏ –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è
- `/my_sessions` - –Ü—Å—Ç–æ—Ä—ñ—è —Å–µ—Å—ñ–π
- `/connect_calendar` - –ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ Google Calendar
- `/cancel` - –°–∫–∞—Å—É–≤–∞—Ç–∏ –ø–æ—Ç–æ—á–Ω—É –æ–ø–µ—Ä–∞—Ü—ñ—é

## ‚ö° –®–≤–∏–¥–∫–∏–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω—É–≤–∞–Ω–Ω—è —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é

```bash
git clone https://github.com/VladPohorielov/AI-bot.git
cd AI-bot
```

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è –∑–∞–ª–µ–∂–Ω–æ—Å—Ç–µ–π

```bash
pip install -r requirements.txt
```

### 3. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –∑–º—ñ–Ω–Ω–∏—Ö —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

–°—Ç–≤–æ—Ä—ñ—Ç—å —Ñ–∞–π–ª `.env` —Ç–∞ –¥–æ–¥–∞–π—Ç–µ –Ω–µ–æ–±—Ö—ñ–¥–Ω—ñ –∫–ª—é—á—ñ:

```env
# Telegram Bot Token
TELEGRAM_BOT_TOKEN=your_telegram_bot_token

# OpenAI API Key
OPENAI_API_KEY=your_openai_api_key

# Google Calendar OAuth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret
GOOGLE_REDIRECT_URI=https://ai-bot-tau-seven.vercel.app/oauth_callback.html

# Security
ENCRYPTION_KEY=your_32_byte_encryption_key
```

### 4. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Google OAuth

–î–∏–≤—ñ—Ç—å—Å—è –¥–µ—Ç–∞–ª—å–Ω—É —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é —É —Ñ–∞–π–ª—ñ [GOOGLE_OAUTH_SETUP.md](./GOOGLE_OAUTH_SETUP.md)

### 5. –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞

```bash
# –ó–∞–ø—É—Å–∫ OAuth —Å–µ—Ä–≤–µ—Ä–∞ (–≤ –æ–∫—Ä–µ–º–æ–º—É —Ç–µ—Ä–º—ñ–Ω–∞–ª—ñ)
python run_oauth_server.py

# –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞
python main_bot.py
```

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç—É

```
AI-bot/
‚îú‚îÄ‚îÄ handlers/                 # –û–±—Ä–æ–±–Ω–∏–∫–∏ –∫–æ–º–∞–Ω–¥ —Ç–∞ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å
‚îÇ   ‚îú‚îÄ‚îÄ enhanced_capture_handlers.py
‚îÇ   ‚îú‚îÄ‚îÄ settings_handlers.py
‚îÇ   ‚îú‚îÄ‚îÄ voice_audio_handler.py
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ services/                 # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞ —Ç–∞ —Å–µ—Ä–≤—ñ—Å–∏
‚îÇ   ‚îú‚îÄ‚îÄ analysis.py          # –ê–Ω–∞–ª—ñ–∑ —Ç–µ–∫—Å—Ç—É —Ç–∞ –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π
‚îÇ   ‚îú‚îÄ‚îÄ google_calendar.py   # Google Calendar API
‚îÇ   ‚îú‚îÄ‚îÄ google_oauth.py      # OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è
‚îÇ   ‚îú‚îÄ‚îÄ enhanced_capture_flow.py # –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è
‚îÇ   ‚îú‚îÄ‚îÄ phone_extractor.py   # –í–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä—ñ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ–≤
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ states/                   # FSM —Å—Ç–∞–Ω–∏
‚îú‚îÄ‚îÄ keyboards/               # Telegram –∫–ª–∞–≤—ñ–∞—Ç—É—Ä–∏
‚îú‚îÄ‚îÄ tests/                   # –¢–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ config.py               # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è
‚îú‚îÄ‚îÄ main_bot.py            # –û—Å–Ω–æ–≤–Ω–∏–π —Ñ–∞–π–ª –±–æ—Ç–∞
‚îî‚îÄ‚îÄ requirements.txt       # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
```

## üîß –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è —Ä–æ–∑—Ä–æ–±–∫–∏

### –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –¢–µ—Å—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–±–∞—Ü—ñ—ó
python test_audio.py

# –¢–µ—Å—Ç –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –ø–æ–¥—ñ–π
python test_event_extraction.py

# –¢–µ—Å—Ç –ø–æ–∫—Ä–∞—â–µ–Ω–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—É –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è
python test_enhanced_flow.py

# –¢–µ—Å—Ç –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è —Ç–µ–ª–µ—Ñ–æ–Ω—ñ–≤
python test_phone_extractor.py
```

### –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è .env
python setup_env.py
```

## üåü –ù–æ–≤—ñ —Ñ—É–Ω–∫—Ü—ñ—ó

### Enhanced Capture Flow

- –ü–æ–∫—Ä–∞—â–µ–Ω–∏–π –ø—Ä–æ—Ü–µ—Å –∑–∞—Ö–æ–ø–ª–µ–Ω–Ω—è –ø–µ—Ä–µ–ø–∏—Å–æ–∫
- –ú–∞–Ω—É–∞–ª—å–Ω–∏–π –ø–µ—Ä–µ–≥–ª—è–¥ —Ç–∞ —Ä–µ–¥–∞–≥—É–≤–∞–Ω–Ω—è –≤–∏—Ç—è–≥–Ω—É—Ç–∏—Ö –ø–æ–¥—ñ–π
- –Ü–Ω—Ç–µ–≥—Ä–∞—Ü—ñ—è –≤–∏—Ç—è–≥—É–≤–∞–Ω–Ω—è –Ω–æ–º–µ—Ä—ñ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ–≤
- FSM –¥–ª—è —É–ø—Ä–∞–≤–ª—ñ–Ω–Ω—è —Å–∫–ª–∞–¥–Ω–∏–º–∏ —Ä–æ–±–æ—á–∏–º–∏ –ø—Ä–æ—Ü–µ—Å–∞–º–∏

### Phone Extractor

- –†–æ–∑–ø—ñ–∑–Ω–∞–≤–∞–Ω–Ω—è —É–∫—Ä–∞—ó–Ω—Å—å–∫–∏—Ö –Ω–æ–º–µ—Ä—ñ–≤ —Ç–µ–ª–µ—Ñ–æ–Ω—ñ–≤ (+380, 067, 044)
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ –º—ñ–∂–Ω–∞—Ä–æ–¥–Ω–∏—Ö —Ñ–æ—Ä–º–∞—Ç—ñ–≤
- –°–∫–æ—Ä–∏–Ω–≥ –≤–ø–µ–≤–Ω–µ–Ω–æ—Å—Ç—ñ —Ç–∞ —Ç–∏–ø—ñ–∑–∞—Ü—ñ—è —Ç–µ–ª–µ—Ñ–æ–Ω—ñ–≤
- –î–µ–¥—É–ø–ª—ñ–∫–∞—Ü—ñ—è —Ç–∞ —Ñ–æ—Ä–º–∞—Ç—É–≤–∞–Ω–Ω—è –¥–ª—è –±–æ—Ç—ñ–≤

## üìÑ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è

- [GOOGLE_OAUTH_SETUP.md](./GOOGLE_OAUTH_SETUP.md) - –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Google OAuth
- [ENHANCED_PROGRESS.md](./ENHANCED_PROGRESS.md) - –î–µ—Ç–∞–ª—ñ –ø–æ–∫—Ä–∞—â–µ–Ω—å
- [FIXES_SUMMARY.md](./FIXES_SUMMARY.md) - –Ü—Å—Ç–æ—Ä—ñ—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω—å
- [README_FFMPEG_FIX.md](./README_FFMPEG_FIX.md) - –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è FFmpeg

## ü§ù –í–Ω–µ—Å–æ–∫ —É –ø—Ä–æ–µ–∫—Ç

1. –ó—Ä–æ–±—ñ—Ç—å —Ñ–æ—Ä–∫ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—é
2. –°—Ç–≤–æ—Ä—ñ—Ç—å –≥—ñ–ª–∫—É –¥–ª—è –Ω–æ–≤–æ—ó —Ñ—É–Ω–∫—Ü—ñ—ó (`git checkout -b feature/amazing-feature`)
3. –ó–∞–∫–æ–º—ñ—Ç—å—Ç–µ –∑–º—ñ–Ω–∏ (`git commit -m 'Add amazing feature'`)
4. –ó–∞–ø—É—à—ñ—Ç—å —É –≥—ñ–ª–∫—É (`git push origin feature/amazing-feature`)
5. –°—Ç–≤–æ—Ä—ñ—Ç—å Pull Request

## üìù –õ—ñ—Ü–µ–Ω–∑—ñ—è

–¶–µ–π –ø—Ä–æ–µ–∫—Ç —Ä–æ–∑–ø–æ–≤—Å—é–¥–∂—É—î—Ç—å—Å—è –ø—ñ–¥ –ª—ñ—Ü–µ–Ω–∑—ñ—î—é MIT. –î–∏–≤—ñ—Ç—å—Å—è —Ñ–∞–π–ª [LICENSE](LICENSE) –¥–ª—è –¥–µ—Ç–∞–ª–µ–π.

## üë®‚Äçüíª –ê–≤—Ç–æ—Ä

**Vlad Pohorielov** - [GitHub](https://github.com/VladPohorielov)

## üìû –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ —É –≤–∞—Å –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏, —Å—Ç–≤–æ—Ä—ñ—Ç—å [issue](https://github.com/VladPohorielov/AI-bot/issues) —É —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ—ó.
