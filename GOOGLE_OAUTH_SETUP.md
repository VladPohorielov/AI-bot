# –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è Google OAuth –¥–ª—è Calendar API

## –ö—Ä–æ–∫ 1: –°—Ç–≤–æ—Ä–∏—Ç–∏ Google Cloud –ø—Ä–æ–µ–∫—Ç

1. –í—ñ–¥–∫—Ä–∏—Ç–∏ [Google Cloud Console](https://console.cloud.google.com/)
2. –°—Ç–≤–æ—Ä–∏—Ç–∏ –Ω–æ–≤–∏–π –ø—Ä–æ–µ–∫—Ç –∞–±–æ –≤–∏–±—Ä–∞—Ç–∏ —ñ—Å–Ω—É—é—á–∏–π
3. –ê–∫—Ç–∏–≤—É–≤–∞—Ç–∏ Google Calendar API:
   - –ü–µ—Ä–µ–π—Ç–∏ –≤ **APIs & Services** > **Library**
   - –ó–Ω–∞–π—Ç–∏ —Ç–∞ –∞–∫—Ç–∏–≤—É–≤–∞—Ç–∏ **Google Calendar API**

## –ö—Ä–æ–∫ 2: –°—Ç–≤–æ—Ä–∏—Ç–∏ OAuth 2.0 credentials

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **APIs & Services** > **Credentials**
2. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **+ CREATE CREDENTIALS** > **OAuth client ID**
3. –Ø–∫—â–æ —Ç—Ä–µ–±–∞, –Ω–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ OAuth consent screen:
   - User Type: **External** (–¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è)
   - App name: –Ω–∞–∑–≤–∞ –≤–∞—à–æ–≥–æ –±–æ—Ç–∞
   - User support email: –≤–∞—à email
   - Developer contact: –≤–∞—à email
4. –°—Ç–≤–æ—Ä–∏—Ç–∏ OAuth client ID:
   - Application type: **Web application**
   - Name: `Telegram Calendar Bot`
   - Authorized redirect URIs:
     - `http://localhost:8080/oauth/callback`
     - `http://127.0.0.1:8080/oauth/callback`

## –ö—Ä–æ–∫ 3: –û—Ç—Ä–∏–º–∞—Ç–∏ credentials

–ü—ñ—Å–ª—è —Å—Ç–≤–æ—Ä–µ–Ω–Ω—è OAuth client ID –≤–∏ –æ—Ç—Ä–∏–º–∞—î—Ç–µ:

- **Client ID** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `123456789-abcdefg.apps.googleusercontent.com`)
- **Client Secret** (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥: `GOCSPX-1234567890abcdefghij`)

## –ö—Ä–æ–∫ 4: –î–æ–¥–∞—Ç–∏ —Ç–µ—Å—Ç–æ–≤–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ (–í–ê–ñ–õ–ò–í–û!)

üö® **–û–±–æ–≤'—è–∑–∫–æ–≤–æ –¥–ª—è External –∑–∞—Å—Ç–æ—Å—É–Ω–∫—ñ–≤:**

1. –ü–µ—Ä–µ–π—Ç–∏ –≤ **APIs & Services** > **OAuth consent screen**
2. –ó–Ω–∞–π—Ç–∏ —Å–µ–∫—Ü—ñ—é **"Test users"**
3. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **"+ ADD USERS"**
4. –î–æ–¥–∞—Ç–∏ –≤–∞—à email (vladpog2015@gmail.com)
5. –ù–∞—Ç–∏—Å–Ω—É—Ç–∏ **"SAVE"**

–ë–µ–∑ —Ü—å–æ–≥–æ –∫—Ä–æ–∫—É –±—É–¥–µ –ø–æ–º–∏–ª–∫–∞ **403: access_denied**!

## –ö—Ä–æ–∫ 5: –û–Ω–æ–≤–∏—Ç–∏ .env —Ñ–∞–π–ª

–ó–∞–º—ñ–Ω–∏—Ç–∏ —É —Ñ–∞–π–ª—ñ `.env`:

```env
GOOGLE_CLIENT_ID=–≤–∞—à_—Ä–µ–∞–ª—å–Ω–∏–π_client_id
GOOGLE_CLIENT_SECRET=–≤–∞—à_—Ä–µ–∞–ª—å–Ω–∏–π_client_secret
GOOGLE_REDIRECT_URI=http://localhost:8080/oauth/callback
```

## –ö—Ä–æ–∫ 6: –ó–∞–ø—É—Å—Ç–∏—Ç–∏ OAuth —Å–µ—Ä–≤–µ—Ä

–ü–µ—Ä–µ–¥ –ø—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è–º –∫–∞–ª–µ–Ω–¥–∞—Ä—è –ø–æ—Ç—Ä—ñ–±–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç–∏ OAuth callback —Å–µ—Ä–≤–µ—Ä:

```bash
python services/oauth_server.py
```

## –ö—Ä–æ–∫ 7: –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

1. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –±–æ—Ç–∞
2. –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∫–æ–º–∞–Ω–¥—É `/settings` ‚Üí **–ü—ñ–¥–∫–ª—é—á–∏—Ç–∏ –∫–∞–ª–µ–Ω–¥–∞—Ä**
3. –ü–µ—Ä–µ–π—Ç–∏ –∑–∞ –ø–æ—Å–∏–ª–∞–Ω–Ω—è–º –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
4. –î–æ–∑–≤–æ–ª–∏—Ç–∏ –¥–æ—Å—Ç—É–ø –¥–æ –∫–∞–ª–µ–Ω–¥–∞—Ä—è
5. –ü–æ–≤–µ—Ä–Ω—É—Ç–∏—Å—å –¥–æ –±–æ—Ç–∞

## –ú–æ–∂–ª–∏–≤—ñ –ø—Ä–æ–±–ª–µ–º–∏

### 401: invalid_client

- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ø—Ä–∞–≤–∏–ª—å–Ω—ñ—Å—Ç—å Client ID —Ç–∞ Client Secret
- –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ redirect URI —Ç–æ—á–Ω–æ —Å–ø—ñ–≤–ø–∞–¥–∞—î
- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ Google Calendar API –∞–∫—Ç–∏–≤–æ–≤–∞–Ω–µ

### 403: access_denied

- **–î–æ–¥–∞—Ç–∏ –≤–∞—à email —É Test users** –≤ OAuth consent screen
- –ê–±–æ –æ–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ (PUBLISH APP)
- –ü–µ—Ä–µ–∫–æ–Ω–∞—Ç–∏—Å—è, —â–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π Google –∞–∫–∫–∞—É–Ω—Ç

### redirect_uri_mismatch

- –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Ç–æ—á–Ω—É –≤—ñ–¥–ø–æ–≤—ñ–¥–Ω—ñ—Å—Ç—å redirect URI –≤ Google Console —Ç–∞ .env —Ñ–∞–π–ª—ñ

## –î–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞

–ö–æ–ª–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ –≥–æ—Ç–æ–≤–∏–π –¥–æ –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
1. –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ –¥–æ–º–µ–Ω –∑–∞–º—ñ—Å—Ç—å localhost
2. –û–ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ –∑–∞—Å—Ç–æ—Å—É–Ω–æ–∫ —É Google Console
3. –ü—Ä–æ–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å –≤–µ—Ä–∏—Ñ—ñ–∫–∞—Ü—ñ—ó Google (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
